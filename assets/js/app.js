(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var bodyElement = document.querySelector('body'); //Mobile Nav Toggle

var mobileNav = function mobileNav() {
  var $siteWrap = document.querySelector('.site-wrap');
  var $burgerBtn = document.querySelector('.js-nav-btn');
  $siteWrap.addEventListener('click', function (evt) {
    var target = evt.target;

    if (!target.classList.contains('header__nav--active') && target.classList.contains('site-wrap--overlay')) {
      toggleMenu($burgerBtn);
    }
  });
  $burgerBtn.addEventListener('click', function () {
    toggleMenu(this);
  });

  function toggleMenu(elem) {
    elem.classList.toggle('active');
    elem.nextElementSibling.classList.toggle('header__nav--active');
    $siteWrap.classList.toggle('site-wrap--overlay');
  }
}; //Modals


var modal = bodyElement.querySelector('.js-modal');
var modalParent = modal.parentElement;
var MODAL_OPEN = 'modal-open';
var myModal = {
  init: function init() {
    var _this = this;

    bodyElement.addEventListener('click', function (evt) {
      var target = evt.target;

      if (target.dataset.modal) {
        _this.open(target.dataset.modal);
      }

      if (target.classList.contains('modal-overlay') || target.classList.contains('js-modal__close')) {
        _this.close();
      }
    });
  },
  open: function open(id) {
    //============ OPEN
    var temp = document.querySelector(id);
    var modalClass = temp.dataset.parentclass || '';
    bodyElement.classList.add(MODAL_OPEN);
    var newContent = temp.content.cloneNode(true);

    if (modalClass !== '') {
      modal.classList.add(modalClass);
      modal.dataset.modalclass = modalClass || '';
    }

    this.setContent(newContent);
    modalParent.classList.add('fadeOut');
    modal.classList.add('fadeOut');
  },
  setContent: function setContent(html) {
    var content = document.querySelector('[data-setcontent]');
    content.innerHTML = '';
    content.appendChild(html);
  },
  close: function close() {
    //============ CLOSE
    bodyElement.classList.remove(MODAL_OPEN);
    modalParent.classList.remove('fadeOut');
    modal.classList.remove('fadeOut');
    modal.dataset.modalclass ? modal.classList.remove(modal.dataset.modalclass) : null;
    modal.dataset.modalclass = '';
    modal.removeAttribute('data-modalclass');
  }
}; //Check Field Length

var lengthFilter = function lengthFilter(elem) {
  elem.addEventListener('submit', function () {
    var innerElem = elem.querySelector('.input-search');

    if (innerElem.value.length < 2) {
      innerElem.classList.add('error');
    } else {
      innerElem.value = '';
      innerElem.classList.remove('error');
    }
  });
}; //Tabs


function tabs() {
  var bindAll = function bindAll() {
    var menuElements = document.querySelectorAll('[data-tab]');

    for (var i = 0; i < menuElements.length; i++) {
      menuElements[i].addEventListener('click', change);
    }
  };

  var clear = function clear() {
    var menuElements = bodyElement.querySelectorAll('[data-tab]');

    for (var i = 0; i < menuElements.length; i++) {
      menuElements[i].classList.remove('active');
      var id = menuElements[i].getAttribute('data-tab');
      document.getElementById(id).classList.remove('active');
    }
  };

  var change = function change(e) {
    e.preventDefault();
    clear();
    e.target.classList.add('active');
    var id = e.currentTarget.getAttribute('data-tab');
    document.getElementById(id).classList.add('active');
  };

  bindAll();
} //Select


bodyElement.querySelectorAll('.select').forEach(function (select) {
  var selectCurrent = select.querySelector('.select__current'),
      selectList = select.querySelector('.select__list'),
      selectInput = select.querySelector('.select__input'),
      selectItem = select.querySelectorAll('.select__item');
  selectCurrent.addEventListener('click', function () {
    selectList.classList.toggle('select__list--show');
  });
  selectItem.forEach(function (item) {
    item.addEventListener('click', function () {
      var itemValue = item.getAttribute('data-value');
      var itemText = item.textContent;
      selectInput.value = itemValue;
      selectCurrent.textContent = itemText;
      selectListHide();
    });
  });

  var selectListHide = function selectListHide() {
    selectList.classList.remove('select__list--show');
  };

  document.addEventListener('mouseup', function (e) {
    if (!select.contains(e.target)) selectListHide();
  });
}); //Clear Selects

var resetFilters = function resetFilters(reset, elem) {
  reset = bodyElement.querySelector('.js-reset-filters');
  reset.addEventListener('click', function () {
    elem = bodyElement.querySelectorAll('.select').forEach(function (item) {
      var defaultVal = item.querySelector('.select__current').dataset.default,
          selectCurrent = item.querySelector('.select__current'),
          selectInput = item.querySelector('.select__input');
      selectCurrent.innerHTML = defaultVal;
      selectInput.value = defaultVal;
    });
  });
};

resetFilters();
var compareData = [];
var $compares = Array.from(bodyElement.querySelectorAll('.js-compare'));
var $compareState = bodyElement.querySelector('.js-state-compare');

function compare($el) {
  var $parent = $el.parentElement;
  var id = +$parent.dataset.product;
  var textWrap = $el.querySelector('button > span');
  $el.classList.toggle('active');

  if ($el.classList.contains('active')) {
    textWrap.textContent = 'В сравнении';
    compareData.push(id);
  } else {
    textWrap.textContent = 'Сравнить товар';
    compareData = compareData.filter(function (num) {
      return num !== id;
    });
  }

  $compareState.textContent = '' + compareData.length;
}

if ($compares.length) {
  $compares.forEach(function (el) {
    el.addEventListener('click', function () {
      compare(el);
    });
  });
} // Favorite


var favoriteData = [];
var $favorites = Array.from(bodyElement.querySelectorAll('.js-favorite'));
var $favoriteState = bodyElement.querySelector('.js-state-favorite');

function favorite($el) {
  var $parent = $el.parentElement;
  var id = +$parent.dataset.product;
  var textWrap = $el.querySelector('button > span');
  $el.classList.toggle('active');

  if ($el.classList.contains('active')) {
    textWrap.textContent = 'В избранном';
    favoriteData.push(id);
  } else {
    textWrap.textContent = 'В избранное';
    favoriteData = favoriteData.filter(function (num) {
      return num !== id;
    });
  }

  $favoriteState.textContent = '' + favoriteData.length;
}

if ($favorites.length) {
  $favorites.forEach(function (el) {
    el.addEventListener('click', function () {
      favorite(el);
    });
  });
}

var plugins = {
  modal: bodyElement.querySelectorAll('.js-modal'),
  mobileNav: bodyElement.querySelectorAll('.js-nav-btn'),
  tabs: bodyElement.querySelectorAll('[data-tab]'),
  filter: bodyElement.querySelector('.form-search')
}; // Modal

if (plugins.modal.length) {
  myModal.init();
} //Mobile Nav


if (plugins.mobileNav.length) {
  mobileNav();
} //Tabs


if (plugins.tabs.length) {
  tabs();
} //Filter


if (plugins.filter.length) {
  lengthFilter(plugins.filter);
}

},{}],2:[function(require,module,exports){
'use strict';

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

document.addEventListener('DOMContentLoaded', function () {
  Promise.resolve().then(function () {
    return _interopRequireWildcard(require('./core'));
  });
});

},{"./core":1}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9jb3JlLmpzIiwianMvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBTSxXQUFXLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsTUFBdkIsQ0FBcEIsQyxDQUVBOztBQUNBLElBQU0sU0FBUyxHQUFHLFNBQVosU0FBWSxHQUFVO0FBQzNCLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLFlBQXZCLENBQWxCO0FBQ0EsTUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsYUFBdkIsQ0FBbkI7QUFDQSxFQUFBLFNBQVMsQ0FBQyxnQkFBVixDQUEyQixPQUEzQixFQUFvQyxVQUFVLEdBQVYsRUFBZTtBQUNsRCxRQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBakI7O0FBRUEsUUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFQLENBQWlCLFFBQWpCLENBQTBCLHFCQUExQixDQUFELElBQXFELE1BQU0sQ0FBQyxTQUFQLENBQWlCLFFBQWpCLENBQTBCLG9CQUExQixDQUF6RCxFQUEwRztBQUN6RyxNQUFBLFVBQVUsQ0FBRSxVQUFGLENBQVY7QUFDQTtBQUNELEdBTkQ7QUFRQSxFQUFBLFVBQVUsQ0FBQyxnQkFBWCxDQUE0QixPQUE1QixFQUFxQyxZQUFZO0FBQ2hELElBQUEsVUFBVSxDQUFFLElBQUYsQ0FBVjtBQUNBLEdBRkQ7O0FBSUEsV0FBUyxVQUFULENBQW9CLElBQXBCLEVBQTBCO0FBQ3pCLElBQUEsSUFBSSxDQUFDLFNBQUwsQ0FBZSxNQUFmLENBQXNCLFFBQXRCO0FBQ0EsSUFBQSxJQUFJLENBQUMsa0JBQUwsQ0FBd0IsU0FBeEIsQ0FBa0MsTUFBbEMsQ0FBeUMscUJBQXpDO0FBQ0EsSUFBQSxTQUFTLENBQUMsU0FBVixDQUFvQixNQUFwQixDQUEyQixvQkFBM0I7QUFDQTtBQUNELENBcEJELEMsQ0FzQkE7OztBQUNB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USxDQUFDLEVBQUQsQ0FBUjtBQUNBLEtBRkQ7QUFHQSxHQUpEO0FBS0E7O0FBSUQsSUFBSSxPQUFPLEdBQUc7QUFDYixFQUFBLEtBQUssRUFBRSxXQUFXLENBQUMsZ0JBQVosQ0FBNkIsV0FBN0IsQ0FETTtBQUViLEVBQUEsU0FBUyxFQUFFLFdBQVcsQ0FBQyxnQkFBWixDQUE2QixhQUE3QixDQUZFO0FBR2IsRUFBQSxJQUFJLEVBQUUsV0FBVyxDQUFDLGdCQUFaLENBQTZCLFlBQTdCLENBSE87QUFJYixFQUFBLE1BQU0sRUFBRSxXQUFXLENBQUMsYUFBWixDQUEwQixjQUExQjtBQUpLLENBQWQsQyxDQVFBOztBQUNBLElBQUcsT0FBTyxDQUFDLEtBQVIsQ0FBYyxNQUFqQixFQUF3QjtBQUN2QixFQUFBLE9BQU8sQ0FBQyxJQUFSO0FBQ0EsQyxDQUNEOzs7QUFDQSxJQUFHLE9BQU8sQ0FBQyxTQUFSLENBQWtCLE1BQXJCLEVBQTRCO0FBQzNCLEVBQUEsU0FBUztBQUNULEMsQ0FDRDs7O0FBQ0EsSUFBRyxPQUFPLENBQUMsSUFBUixDQUFhLE1BQWhCLEVBQXVCO0FBQ3RCLEVBQUEsSUFBSTtBQUNKLEMsQ0FDRDs7O0FBQ0EsSUFBRyxPQUFPLENBQUMsTUFBUixDQUFlLE1BQWxCLEVBQXlCO0FBQ3hCLEVBQUEsWUFBWSxDQUFDLE9BQU8sQ0FBQyxNQUFULENBQVo7QUFDQTs7O0FDelBEOzs7Ozs7OztBQUVBLFFBQVEsQ0FBQyxnQkFBVCxDQUEwQixrQkFBMUIsRUFBOEMsWUFBVztBQUN2RDtBQUFBLDJDQUFPLFFBQVA7QUFBQTtBQUNELENBRkQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJjb25zdCBib2R5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuXHJcbi8vTW9iaWxlIE5hdiBUb2dnbGVcclxuY29uc3QgbW9iaWxlTmF2ID0gZnVuY3Rpb24oKXtcclxuXHRjb25zdCAkc2l0ZVdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2l0ZS13cmFwJyk7XHJcblx0Y29uc3QgJGJ1cmdlckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1uYXYtYnRuJyk7XHJcblx0JHNpdGVXcmFwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2dCkge1xyXG5cdFx0bGV0IHRhcmdldCA9IGV2dC50YXJnZXQ7XHJcblxyXG5cdFx0aWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoZWFkZXJfX25hdi0tYWN0aXZlJykgJiYgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2l0ZS13cmFwLS1vdmVybGF5JykpIHtcclxuXHRcdFx0dG9nZ2xlTWVudSggJGJ1cmdlckJ0biApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQkYnVyZ2VyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG5cdFx0dG9nZ2xlTWVudSggdGhpcyApO1xyXG5cdH0pO1xyXG5cclxuXHRmdW5jdGlvbiB0b2dnbGVNZW51KGVsZW0pIHtcclxuXHRcdGVsZW0uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcblx0XHRlbGVtLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX25hdi0tYWN0aXZlJyk7XHJcblx0XHQkc2l0ZVdyYXAuY2xhc3NMaXN0LnRvZ2dsZSgnc2l0ZS13cmFwLS1vdmVybGF5Jyk7XHJcblx0fVxyXG59XHJcblxyXG4vL01vZGFsc1xyXG5jb25zdCBtb2RhbCA9IGJvZHlFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1tb2RhbCcpO1xyXG5jb25zdCBtb2RhbFBhcmVudCA9IG1vZGFsLnBhcmVudEVsZW1lbnQ7XHJcbmNvbnN0IE1PREFMX09QRU4gPSAnbW9kYWwtb3Blbic7XHJcblxyXG5jb25zdCBteU1vZGFsID0ge1xyXG5cdGluaXQoKSB7XHJcblx0XHRib2R5RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gZXZ0LnRhcmdldDtcclxuXHJcblx0XHRcdGlmICh0YXJnZXQuZGF0YXNldC5tb2RhbCkge1xyXG5cdFx0XHRcdHRoaXMub3Blbih0YXJnZXQuZGF0YXNldC5tb2RhbClcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsLW92ZXJsYXknKSB8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1tb2RhbF9fY2xvc2UnKSkge1xyXG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHR9LFxyXG5cclxuXHRvcGVuKGlkKSB7IC8vPT09PT09PT09PT09IE9QRU5cclxuXHRcdGNvbnN0IHRlbXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGlkKTtcclxuXHRcdGNvbnN0IG1vZGFsQ2xhc3MgPSB0ZW1wLmRhdGFzZXQucGFyZW50Y2xhc3MgfHwgJyc7XHJcblx0XHRib2R5RWxlbWVudC5jbGFzc0xpc3QuYWRkKE1PREFMX09QRU4pO1xyXG5cdFx0Y29uc3QgbmV3Q29udGVudCA9IHRlbXAuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcblx0XHRpZihtb2RhbENsYXNzICE9PSAnJyl7XHJcblx0XHRcdG1vZGFsLmNsYXNzTGlzdC5hZGQobW9kYWxDbGFzcylcclxuXHRcdFx0bW9kYWwuZGF0YXNldC5tb2RhbGNsYXNzID0gbW9kYWxDbGFzcyB8fCAnJztcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0dGhpcy5zZXRDb250ZW50KG5ld0NvbnRlbnQpO1xyXG5cdFx0bW9kYWxQYXJlbnQuY2xhc3NMaXN0LmFkZCgnZmFkZU91dCcpO1xyXG5cdFx0bW9kYWwuY2xhc3NMaXN0LmFkZCgnZmFkZU91dCcpO1xyXG5cdH0sXHJcblxyXG5cdHNldENvbnRlbnQoaHRtbCkge1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNldGNvbnRlbnRdJyk7XHJcblx0XHRjb250ZW50LmlubmVySFRNTCA9ICcnO1xyXG5cdFx0Y29udGVudC5hcHBlbmRDaGlsZChodG1sKTtcclxuXHR9LFxyXG5cclxuXHRjbG9zZSgpIHsgLy89PT09PT09PT09PT0gQ0xPU0VcclxuXHRcdGJvZHlFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoTU9EQUxfT1BFTik7XHJcblx0XHRtb2RhbFBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlT3V0Jyk7XHJcblx0XHRtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlT3V0Jyk7XHJcblx0XHRtb2RhbC5kYXRhc2V0Lm1vZGFsY2xhc3MgPyBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKG1vZGFsLmRhdGFzZXQubW9kYWxjbGFzcykgOiBudWxsO1xyXG5cdFx0bW9kYWwuZGF0YXNldC5tb2RhbGNsYXNzID0gJyc7XHJcblx0XHRtb2RhbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtbW9kYWxjbGFzcycpO1xyXG5cdH1cclxufTtcclxuXHJcblxyXG5cclxuLy9DaGVjayBGaWVsZCBMZW5ndGhcclxubGV0IGxlbmd0aEZpbHRlciA9IGZ1bmN0aW9uIChlbGVtKSB7XHJcblx0ZWxlbS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLGZ1bmN0aW9uICgpIHtcclxuXHRcdGxldCBpbm5lckVsZW0gPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dC1zZWFyY2gnKTtcclxuXHRcdGlmKGlubmVyRWxlbS52YWx1ZS5sZW5ndGggPCAyKXtcclxuXHRcdFx0aW5uZXJFbGVtLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0aW5uZXJFbGVtLnZhbHVlID0gJyc7XHJcblx0XHRcdGlubmVyRWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xyXG5cdFx0fVxyXG5cdH0pXHJcbn1cclxuXHJcblxyXG5cclxuLy9UYWJzXHJcbmZ1bmN0aW9uIHRhYnMoKSB7XHJcblx0bGV0IGJpbmRBbGwgPSBmdW5jdGlvbigpIHtcclxuXHRcdGxldCBtZW51RWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10YWJdJyk7XHJcblx0XHRmb3IobGV0IGkgPSAwOyBpIDwgbWVudUVsZW1lbnRzLmxlbmd0aCA7IGkrKykge1xyXG5cdFx0XHRtZW51RWxlbWVudHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGFuZ2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRsZXQgY2xlYXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdGxldCBtZW51RWxlbWVudHMgPSBib2R5RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10YWJdJyk7XHJcblx0XHRmb3IobGV0IGkgPSAwOyBpIDwgbWVudUVsZW1lbnRzLmxlbmd0aCA7IGkrKykge1xyXG5cdFx0XHRtZW51RWxlbWVudHNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0XHRcdGxldCBpZCA9IG1lbnVFbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFiJyk7XHJcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGxldCBjaGFuZ2UgPSBmdW5jdGlvbihlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KClcclxuXHRcdGNsZWFyKCk7XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHRcdGxldCBpZCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFiJyk7XHJcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0fVxyXG5cdGJpbmRBbGwoKTtcclxufVxyXG5cclxuXHJcbi8vU2VsZWN0XHJcbmJvZHlFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWxlY3QnKS5mb3JFYWNoKHNlbGVjdCA9PiB7XHJcblx0bGV0IHNlbGVjdEN1cnJlbnQgPSBzZWxlY3QucXVlcnlTZWxlY3RvcignLnNlbGVjdF9fY3VycmVudCcpLFxyXG5cdFx0c2VsZWN0TGlzdCA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0X19saXN0JyksXHJcblx0XHRzZWxlY3RJbnB1dCA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0X19pbnB1dCcpLFxyXG5cdFx0c2VsZWN0SXRlbSA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VsZWN0X19pdGVtJyk7XHJcblxyXG5cdHNlbGVjdEN1cnJlbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRzZWxlY3RMaXN0LmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdF9fbGlzdC0tc2hvdycpO1xyXG5cdH0pXHJcblxyXG5cdHNlbGVjdEl0ZW0uZm9yRWFjaChpdGVtID0+e1xyXG5cdFx0aXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XHJcblxyXG5cdFx0XHRsZXQgaXRlbVZhbHVlID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnKVxyXG5cdFx0XHRsZXQgaXRlbVRleHQgPSBpdGVtLnRleHRDb250ZW50O1xyXG5cdFx0XHRzZWxlY3RJbnB1dC52YWx1ZSA9IGl0ZW1WYWx1ZTtcclxuXHRcdFx0c2VsZWN0Q3VycmVudC50ZXh0Q29udGVudCA9IGl0ZW1UZXh0O1xyXG5cdFx0XHRzZWxlY3RMaXN0SGlkZSgpO1xyXG5cdFx0fSlcclxuXHR9KVxyXG5cdGxldCBzZWxlY3RMaXN0SGlkZSA9ICgpID0+IHtcclxuXHRcdHNlbGVjdExpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0X19saXN0LS1zaG93JylcclxuXHR9XHJcblxyXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZSkgPT57XHJcblx0XHRpZiAoIXNlbGVjdC5jb250YWlucyhlLnRhcmdldCkpXHRzZWxlY3RMaXN0SGlkZSgpXHJcblx0fSlcclxufSlcclxuXHJcbi8vQ2xlYXIgU2VsZWN0c1xyXG5sZXQgcmVzZXRGaWx0ZXJzICA9IGZ1bmN0aW9uKHJlc2V0LGVsZW0pIHtcclxuXHRyZXNldCA9IGJvZHlFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1yZXNldC1maWx0ZXJzJyk7XHJcblxyXG5cdHJlc2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG5cdFx0ZWxlbSA9IGJvZHlFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWxlY3QnKS5mb3JFYWNoKCAoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdGxldCBkZWZhdWx0VmFsID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0X19jdXJyZW50JykuZGF0YXNldC5kZWZhdWx0LFxyXG5cdFx0XHRcdFx0c2VsZWN0Q3VycmVudCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnNlbGVjdF9fY3VycmVudCcpLFxyXG5cdFx0XHRcdFx0c2VsZWN0SW5wdXQgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RfX2lucHV0Jyk7XHJcblxyXG5cdFx0XHRcdHNlbGVjdEN1cnJlbnQuaW5uZXJIVE1MID0gZGVmYXVsdFZhbDtcclxuXHRcdFx0XHRzZWxlY3RJbnB1dC52YWx1ZSA9IGRlZmF1bHRWYWw7XHJcblx0XHR9KVxyXG5cdH0pXHJcbn1cclxucmVzZXRGaWx0ZXJzKCk7XHJcblxyXG5cclxubGV0IGNvbXBhcmVEYXRhID0gW107XHJcbmNvbnN0ICRjb21wYXJlcyA9IEFycmF5LmZyb20oYm9keUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWNvbXBhcmUnKSk7XHJcbmNvbnN0ICRjb21wYXJlU3RhdGUgPSBib2R5RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtc3RhdGUtY29tcGFyZScpO1xyXG5cclxuZnVuY3Rpb24gY29tcGFyZSgkZWwpIHtcclxuXHRjb25zdCAkcGFyZW50ID0gJGVsLnBhcmVudEVsZW1lbnQ7XHJcblx0Y29uc3QgaWQgPSArJHBhcmVudC5kYXRhc2V0LnByb2R1Y3Q7XHJcblx0Y29uc3QgdGV4dFdyYXAgPSAkZWwucXVlcnlTZWxlY3RvcignYnV0dG9uID4gc3BhbicpO1xyXG5cdCRlbC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxuXHRpZiAoJGVsLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcclxuXHRcdHRleHRXcmFwLnRleHRDb250ZW50ID0gJ9CSINGB0YDQsNCy0L3QtdC90LjQuCc7XHJcblx0XHRjb21wYXJlRGF0YS5wdXNoKGlkKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0dGV4dFdyYXAudGV4dENvbnRlbnQgPSAn0KHRgNCw0LLQvdC40YLRjCDRgtC+0LLQsNGAJztcclxuXHRcdGNvbXBhcmVEYXRhID0gY29tcGFyZURhdGEuZmlsdGVyKCBudW0gPT4gbnVtICE9PSAgaWQgKTtcclxuXHR9XHJcblx0JGNvbXBhcmVTdGF0ZS50ZXh0Q29udGVudCA9ICcnICsgKGNvbXBhcmVEYXRhLmxlbmd0aCk7XHJcbn1cclxuXHJcbmlmICgkY29tcGFyZXMubGVuZ3RoKSB7XHJcblx0JGNvbXBhcmVzLmZvckVhY2goIGVsID0+IHtcclxuXHRcdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRjb21wYXJlKGVsKTtcclxuXHRcdH0pXHJcblx0fSk7XHJcbn1cclxuXHJcbi8vIEZhdm9yaXRlXHJcbmxldCBmYXZvcml0ZURhdGEgPSBbXTtcclxuY29uc3QgJGZhdm9yaXRlcyA9IEFycmF5LmZyb20oYm9keUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWZhdm9yaXRlJykpO1xyXG5jb25zdCAkZmF2b3JpdGVTdGF0ZSA9IGJvZHlFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zdGF0ZS1mYXZvcml0ZScpO1xyXG5cclxuZnVuY3Rpb24gIGZhdm9yaXRlKCRlbCkge1xyXG5cdGNvbnN0ICRwYXJlbnQgPSAkZWwucGFyZW50RWxlbWVudDtcclxuXHRjb25zdCBpZCA9ICskcGFyZW50LmRhdGFzZXQucHJvZHVjdDtcclxuXHRjb25zdCB0ZXh0V3JhcCA9ICRlbC5xdWVyeVNlbGVjdG9yKCdidXR0b24gPiBzcGFuJyk7XHJcblx0JGVsLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG5cdGlmICgkZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG5cdFx0dGV4dFdyYXAudGV4dENvbnRlbnQgPSAn0JIg0LjQt9Cx0YDQsNC90L3QvtC8JztcclxuXHRcdGZhdm9yaXRlRGF0YS5wdXNoKGlkKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0dGV4dFdyYXAudGV4dENvbnRlbnQgPSAn0JIg0LjQt9Cx0YDQsNC90L3QvtC1JztcclxuXHRcdGZhdm9yaXRlRGF0YSA9IGZhdm9yaXRlRGF0YS5maWx0ZXIoIG51bSA9PiBudW0gIT09ICBpZCApO1xyXG5cdH1cclxuXHQkZmF2b3JpdGVTdGF0ZS50ZXh0Q29udGVudCA9ICcnICsgKGZhdm9yaXRlRGF0YS5sZW5ndGgpO1xyXG59XHJcblxyXG5pZiAoJGZhdm9yaXRlcy5sZW5ndGgpIHtcclxuXHQkZmF2b3JpdGVzLmZvckVhY2goIGVsID0+IHtcclxuXHRcdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRmYXZvcml0ZShlbCk7XHJcblx0XHR9KVxyXG5cdH0pO1xyXG59XHJcblxyXG5cclxuXHJcbmxldCBwbHVnaW5zID0ge1xyXG5cdG1vZGFsOiBib2R5RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtbW9kYWwnKSxcclxuXHRtb2JpbGVOYXY6IGJvZHlFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1uYXYtYnRuJyksXHJcblx0dGFiczogYm9keUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdGFiXScpLFxyXG5cdGZpbHRlcjogYm9keUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0tc2VhcmNoJyksXHJcbn1cclxuXHJcblxyXG4vLyBNb2RhbFxyXG5pZihwbHVnaW5zLm1vZGFsLmxlbmd0aCl7XHJcblx0bXlNb2RhbC5pbml0KCk7XHJcbn1cclxuLy9Nb2JpbGUgTmF2XHJcbmlmKHBsdWdpbnMubW9iaWxlTmF2Lmxlbmd0aCl7XHJcblx0bW9iaWxlTmF2KCk7XHJcbn1cclxuLy9UYWJzXHJcbmlmKHBsdWdpbnMudGFicy5sZW5ndGgpe1xyXG5cdHRhYnMoKTtcclxufVxyXG4vL0ZpbHRlclxyXG5pZihwbHVnaW5zLmZpbHRlci5sZW5ndGgpe1xyXG5cdGxlbmd0aEZpbHRlcihwbHVnaW5zLmZpbHRlcik7XHJcbn1cclxuXHJcblxyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XHJcbiAgaW1wb3J0KCcuL2NvcmUnKTtcclxufSk7XHJcblxyXG4iXX0=
